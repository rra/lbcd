#
# Makefile.in for lbcd
#

CC     = @CC@

DEFS   = @DEFS@
LIBS   = @LIBS@
CFLAGS = @CFLAGS@

srcdir = @srcdir@
VPATH  = @srcdir@

SHELL  = /bin/sh

HDRS   = config.h lbcd.h protocol.h

SRCS   = lbcd.c server.c kernel.c util.c get_user.c tmp_full.c weight.c
OBJS   = $(SRCS:.c=.o)

all: lbcd

.c.o: $(HDRS)
	$(CC) -c -I. -I$(srcdir) $(DEFS) $(CFLAGS) $<

lbcd: $(OBJS)
	$(CC) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)

clean:
	-rm -f *.o core lbcd

distclean: clean
	-rm -f Makefile config.log config.status config.cache config.h

#
# Dependencies
#
kernel.o: $(srcdir)/kernel.c \
	$(srcdir)/arch/aix.c $(srcdir)/arch/hpux10.c \
	$(srcdir)/arch/irix.c $(srcdir)/arch/linux.c \
	$(srcdir)/arch/osf.c $(srcdir)/arch/solaris.c
